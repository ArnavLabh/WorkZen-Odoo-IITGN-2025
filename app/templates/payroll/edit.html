{% extends "base.html" %}

{% block title %}Edit Payroll - WorkZen{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">
            <i class="fas fa-edit"></i> Edit Payroll
        </h1>
        <a href="{{ url_for('payroll.list') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back
        </a>
    </div>
    
    <form method="POST" action="{{ url_for('payroll.edit', payroll_id=payroll.id) }}">
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> Editing payroll for {{ payroll.user.name }} - {{ ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][payroll.month] }} {{ payroll.year }}
        </div>
        
        <h3>Earnings</h3>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="basic_salary">Basic Salary *</label>
                    <input type="number" step="0.01" class="form-control" id="basic_salary" name="basic_salary" value="{{ payroll.basic_salary }}" required>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="hra">HRA</label>
                    <input type="number" step="0.01" class="form-control" id="hra" name="hra" value="{{ payroll.hra }}">
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="conveyance">Conveyance</label>
                    <input type="number" step="0.01" class="form-control" id="conveyance" name="conveyance" value="{{ payroll.conveyance }}">
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="other_allowances">Other Allowances</label>
                    <input type="number" step="0.01" class="form-control" id="other_allowances" name="other_allowances" value="{{ payroll.other_allowances }}">
                </div>
            </div>
        </div>
        
        <h3>Deductions</h3>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="pf_contribution">PF Contribution</label>
                    <input type="number" step="0.01" class="form-control" id="pf_contribution" name="pf_contribution" value="{{ payroll.pf_contribution }}">
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label class="form-label" for="professional_tax">Professional Tax</label>
                    <input type="number" step="0.01" class="form-control" id="professional_tax" name="professional_tax" value="{{ payroll.professional_tax }}">
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="other_deductions">Other Deductions</label>
            <input type="number" step="0.01" class="form-control" id="other_deductions" name="other_deductions" value="{{ payroll.other_deductions }}">
        </div>
        
        <div class="form-group">
            <label class="form-label" for="status">Status *</label>
            <select class="form-control" id="status" name="status" required>
                <option value="Unpaid" {% if payroll.status == 'Unpaid' %}selected{% endif %}>Unpaid</option>
                <option value="Paid" {% if payroll.status == 'Paid' %}selected{% endif %}>Paid</option>
            </select>
        </div>
        
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Update Payroll
            </button>
            <a href="{{ url_for('payroll.view', payroll_id=payroll.id) }}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}

